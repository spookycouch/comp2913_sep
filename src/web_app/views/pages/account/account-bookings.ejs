<%- include('../../partials/head') %>
<%- include('../../partials/header') %>

<%if(locals.bookings){%>
    <% if(bookings.length > 1) { %>
    <%var i = 0;%>

        <div id="booking_modal">
        <div id="booking_modal_bg" class="close"></div>
        <div id="booking_modal_display">
            <a id="booking_modal_close" class="close">X</a>
            <h2><%- bookings[i].sportName %></h2>
            <h3><%- bookings[i].start_time %></h3>
            <b>Duration: </b> <%- bookings[i].duration %>'
            <br>
            <b>Status: </b> <% if(bookings[i].bookingStatus){ %> confirmed <% } else { %> pending <% } %>
            <br>
            <br>
            <p>Your QR receipt:</p>
            <img src="<%=bookings[0].qr%>"/>
        </div>
    </div>
    <% } %>
<% } %>




<div class="container">

    <!-- Sidebar -->
    <div class="account account--background">
        <%- include('../../partials/account-side-bar') %>

        <div class="account__section account__overview">

            <div class="section__title">
                <h2>Your Bookings</h2>
            </div>


            <% if(locals.bookings){ %>
                <% for (var i = 0; i < bookings.length;  i++ ) { %>
                    <a href="##" class="overview__option hvr-float details">
                        <div class="option__content option__content--center option__content--yellow">
                            <div class="content__title content__title--margin-bottom">
                                <h2><%- bookings[i].sportName %></h2>
                            </div>

                            <div class="content__dsc content__dsc--flex">
                                <div class="content__field">
                                    <div class="field__field">
                                        <img src="/img/icons/clock.png" />
                                        <h3>Time:</h3>
                                        <%- bookings[i].start_time %>
                                    </div>
                                   
                                    <div class="field__field">
                                        <img src="/img/icons/timer.png" />
                                        <h3>Duration:</h3>
                                        <%- bookings[i].duration %> Minutes
                                    </div>
          
                                    <div class="field__field">
                                        <% if(bookings[i].bookingStatus){ %> 
                                            <img src="/img/icons/confirm.png" />
                                            <h3>Status:</h3>
                                            <span class="field__success">confirmed</span>
                                        <% } else { %> 
                                            <img src="/img/icons/close.png" />
                                            <h3>Status:</h3>
                                            <span class="field__danger">pending</span>
                                        <% } %>
                                    </div>  
                                </div>
                            </div>

                            <div class="content__inline">
                                <div class="content__explore content__explore--black hvr-sweep-to-right hvr-sweep-to-right--white">
                                    <h3>Details</h3>
                                </div>
                            </div>
                        </div>
                    </a>
                <% } %>
                <% if(bookings.length < 1) { %>
                    <p style="color: black;">No Bookings Found</p>
                <% } %>
            <% } else { %>
                <p style="color: black;">No Bookings Found</p>
            <% } %>
        </div>
    </div>
</div>


<!-- oh dear, its css -->
<style>
    #booking_modal {
        display: none;
        position: fixed;
        z-index: 1;
        width: 100%;
        height: 100%;
    }
    #booking_modal_display {
        position:relative; margin:auto; margin-top:5%; width: 50%; height: 50%; background-color: rgb(255,255,255);
    }
    #booking_modal_bg {
        position: fixed;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.4);
    }
    #booking_modal_close {
        font-size:x-large;
        position: absolute;
        right: 1em;
        top:0.5em;
        cursor: pointer;
    }
    .content__explore {
        cursor: pointer;
    }
</style>


<!-- oh dear, its not a script file -->
<script>
    var modal = document.getElementById("booking_modal");
    var close = document.getElementsByClassName("close");
    for (var i = 0; i < close.length; ++i) {
        close[i].onclick = function(){
            modal.style.display = "none";
        }
    }

    var details = document.getElementsByClassName("details");
    for (var i = 0; i < details.length; ++i) {
        details[i].onclick = function(){
            modal.style.display = "block";
        }
    }
</script>

<%- include('../../partials/footer') %>
<%- include('../../partials/foot') %>