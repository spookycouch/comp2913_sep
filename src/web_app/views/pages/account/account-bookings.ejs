<%- include('../../partials/head') %>
<%- include('../../partials/header') %>

<%if(locals.bookings){%>
<%var i = 0;%>

    <div id="booking_modal">
    <div id="booking_modal_bg" class="close"></div>
    <div id="booking_modal_display">
        <a id="booking_modal_close" class="close">X</a>
        <h2><%- bookings[i].sportName %></h2>
        <h3><%- bookings[i].start_time %></h3>
        <b>Duration: </b> <%- bookings[i].duration %>'
        <br>
        <b>Status: </b> <% if(bookings[i].bookingStatus){ %> confirmed <% } else { %> pending <% } %>
        <br>
        <br>
        <p>Your QR receipt:</p>
        <img src="<%=bookings[0].qr%>"/>
    </div>
</div>

<% } %>




<div class="container">

    <!-- Sidebar -->
    <div class="account account--background">
        <%- include('../../partials/account-side-bar') %>

        <div class="account__section account__bookings" style="color:black;">

            <h1>Your bookings</h1>

            <!-- Content Tabs -->
            <div class="account__section account__overview short-margin full-width">

                <% if(locals.bookings){ %>
                    <% for (var i = 0; i < bookings.length;  i++ ) { %>

                        <div href="#" class="overview__option hvr-float">
                            <div class="option__content option__content--center" style="background-color: #d6c631;">
                                <div class="content__image">
                                    <img src="<%- bookings[i].facilityPic %>"/>
                                </div>
        
                                <div class="content__title">
                                    <h2><%- bookings[i].sportName %></h2>
                                    <h3><%- bookings[i].start_time %></h3>
                                </div>
        
                                <div class="content__dsc">
                                    <b>Duration: </b> <%- bookings[i].duration %>'
                                    <br>
                                    <b>Status: </b> <% if(bookings[i].bookingStatus){ %> confirmed <% } else { %> pending <% } %>
                                </div>
        
                                <div class="content__explore hvr-sweep-to-right details">
                                    <h3>Details</h3>
                                </div>
                            </div>
                        </div>

                    <% } %>

                <% }else{ %>
                    
                    <div style="height:100%;">
                        <h2 style="color:black;margin:auto;">No bookings found :(</h2>
                    </div>
                <% }%>

            </div>
        </div>
    </div>
</div>


<!-- oh dear, its css -->
<style>
    #booking_modal {
        display: none;
        position: fixed;
        z-index: 1;
        width: 100%;
        height: 100%;
    }
    #booking_modal_display {
        position:relative; margin:auto; margin-top:5%; width: 50%; height: 50%; background-color: rgb(255,255,255);
    }
    #booking_modal_bg {
        position: fixed;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.4);
    }
    #booking_modal_close {
        font-size:x-large;
        position: absolute;
        right: 1em;
        top:0.5em;
        cursor: pointer;
    }
    .content__explore {
        cursor: pointer;
    }
</style>


<!-- oh dear, its not a script file -->
<script>
    var modal = document.getElementById("booking_modal");
    var close = document.getElementsByClassName("close");
    for (var i = 0; i < close.length; ++i) {
        close[i].onclick = function(){
            modal.style.display = "none";
        }
    }

    var details = document.getElementsByClassName("details");
    for (var i = 0; i < details.length; ++i) {
        details[i].onclick = function(){
            modal.style.display = "block";
        }
    }
</script>

<%- include('../../partials/footer') %>
<%- include('../../partials/foot') %>